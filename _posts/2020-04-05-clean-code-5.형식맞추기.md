---
title: "[Clean Code] 5. 형식맞추기"
date: 2020-04-05 21:21:10 -0400
categories: book
---

이 장에서는 형식을 깔끔하게 맞춰 코드를 작성하는 습관을 설명한다.
팀으로 일한다면 팀이 합의해 규칙을 정하고 규칙을 따라야 한다고 한다.
또한 요즘에는 규칙을 자동으로 적용하는 도구를 활용한다.

## 형식을 맞추는 목적
> 일단은 돌아가는 코드가 중요하다고 생각할 수도 있지만,
> 오늘 구현한 기능은 다음 버전에서 바뀔 수 있다.
> *맨처음에 구현한 스타일과 가독성 수준은 유지보수 용이성과 확장성에 지속해서 영향을 미치기 때문이다.*

## 적절한 행 길이를 유지하라.
> Junit, FitNesse, Time and Money는 대다수 200줄 미만이다.
> 일반적으로 큰 파일보다 작은 파일이 이해하기 쉽다.

## 개념은 빈 행으로 분리하다.
> 각 행은 수식이나 절을 나타내고, 일련의 행 묶음은 완결된 생각 하나를 표현한다.
> 생각 사이에는 빈행을 넣어 분리하자

## 세로 밀집도
> 밀접한 코드 행은 세로로 가까이 놓도록 하자
> 하단의 예시를 보고 어떤게 더 보기 쉬운가 비교해보자.

```java
public class ReporterConfig {
    /**
    * 리포터 리스너의 클래스 이름
    */
    private String m_className;
    
    /**
    * 리포터 리스너의 속성
    */
    private List<Property> m_properties = new ArrayList<Property>();
    public void addProperty(Property property) {
        m_properties.add(property);
    }
}
```
* 개선전

```java
public class ReporterConfig {
    private String m_className;
    private List<Property> m_properties = new ArrayList<Property>();
    public void addProperty(Property property) {
        m_properties.add(property);
    }
}
```
* 개선후

## 수직거리
> 서로 밀접한 개념은 세로로 가까이 두어야 한다.
> 소스를 읽는 사람이 쉽게 찾을 수 있다.


##### 변수선언
* 일반적인 변수선언은 사용하는 위치에 최대한 가까이 선언한다.

##### 인스턴스 변수
* 인스턴스 변수는 클래스 맨 처음에 선언한다. 또한 변수간에 세로로 거리를 두지 않는다. (java 기준)

##### 종속 함수
* 한 함수가 다른 함수를 호출한다면, 두 함수는 세로로 가까이 배치한다.
* 가능하다면 호출하는 함수를 호출되는 함수보다 먼저 배치하자.

##### 개념적 유사성
* 양 코드간 개념적 친화도가 높을수록 코드를 가까이 배치한다.

##### 세로 순서
* 일반적으로 호출되는 함수를 호출하는 함수보다 나중에 배치한다. (소스코드 모듈이 고차원에서 저차원으로 자연스럽게 내려간다.)


## 가로형식 맞추기
> 가능한 짧은 행을 선호하나, 요즘은 모니터가 크므로 100 - 120자 까지도 나쁘지 않다.

## 가로 공백과 밀집도
> 가로로는 공백을 사용해 밀접한 개념과 느슨한 개념을 표현한다.
> 또는 연산자 우선순위를 강조하기 위해서도 가로 공백을 사용한다.

```java
public class Quadratic {
    public static double root1(double a, double b, double c) {
        double determinant = determinant(a, b, c);
        return (-b + Math.sqrt(determinant)) / (2*a);
    }
}
```
* 연산자 우선순위 가로형식 예시

## 가로 정렬
> 이전에는 가로 정렬을 자주 사용하였으나, 엉뚱한 부분을 강조해 진짜 의미가 가려지는 경우가 있다.
> **현재는 정렬하지 않는다.**

## 들여쓰기
> 들여쓰기한 파일은 구조가 한눈에 들어온다.
> 때로는 간단한 if문이나 짧은 while문, 짧은함수에서는 들여쓰기를 무시할 수도 있지만,
> 원점으로 돌아가 들여쓰는 습관을 들이자.

## 가짜 범위
> 때로는 빈 while문이나 for문이 존재할때는 하단 예시처럼 작성하자.

```java
while(dis.read(buf, 0, readBufferSize) != -1)
;
```

## 팀 규칙
> 프로그래머라면 각자 선호하는 규칙이 있지만, 팀은 한가지 규칙에 합의해야 한다.
> 스타일은 일관적이고 매끄러워야 한다. 팀 규칙에 따라 팀원들이 일관적인 코드를 함께 짜는것이 좋다.


## 마치며..
> 형식 맞추기는 읽으면서 당연하다 싶은 내용이 많았다.
> 알고있던 개념을 한번 더 복습 할 수 있던? 장이라고 생각이 든다.
> 그러나, 당연하다 싶은 내용을 넘어간다면 터무니 없는 코드 형식이 나올 수도 있지 않을까 생각해본다.

